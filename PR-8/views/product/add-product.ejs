<%- include('../header') %>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>

<link rel="stylesheet" href="../../css/password.style.css">

<div class="page-wrapper">

<div class="page-breadcrumb">
    <div class="row">
        <div class="col-12 d-flex no-block align-items-center">
            <h4 class="page-title">Blog Product</h4>
        </div>
    </div>
</div>

<div class="container-fluid">
<div class="row d-flex justify-content-center">
<div class="col-md-6">

<div class="card">
<form class="form-horizontal" action="/product/add-product/" method="post" enctype="multipart/form-data">

<div class="card-body">
<h4 class="card-title">Add Product</h4>

<!-- CATEGORY -->
<div class="form-group row">
<label class="col-sm-3 text-right control-label col-form-label">Category id</label>
<div class="col-sm-9">
<select name="CategoryId" id="CategoryId" class="form-control" required>
<option value="">--select--</option>
<% categories.forEach((category)=>{ %>
<option value="<%=category.id%>"><%=category.Categoryname%></option>
<% }) %>
</select>
</div>
</div>

<!-- SUBCATEGORY -->
<div class="form-group row">
<label class="col-sm-3 text-right control-label col-form-label">SubCategory id</label>
<div class="col-sm-9">
<select name="SubCategoryId" id="SubCategoryId" class="form-control" required>
<option value="">--select--</option>
</select>
</div>
</div>

<!-- EXTRA SUBCATEGORY -->
<div class="form-group row">
<label class="col-sm-3 text-right control-label col-form-label">ExtraSubCategory id</label>
<div class="col-sm-9">
<select name="ExtraSubCategoryId" id="ExtraSubCategoryId" class="form-control" required>
<option value="">--select--</option>
</select>
</div>
</div>

<!-- NAME -->
<div class="form-group row">
<label class="col-sm-3 text-right control-label col-form-label">Product name</label>
<div class="col-sm-9">
<input type="text" class="form-control" name="ProductName" placeholder="product Name Here" required>
</div>
</div>

<!-- DESCRIPTION -->
<div class="form-group row">
<label class="col-sm-3 text-right control-label col-form-label">Product description</label>
<div class="col-sm-9">
<input type="text" class="form-control" name="discription" placeholder="product description Here" required>
</div>
</div>

<!-- BRAND -->
<div class="form-group row">
<label class="col-sm-3 text-right control-label col-form-label">Product Brand</label>
<div class="col-sm-9">
<input type="text" class="form-control" name="Brand" placeholder="product Brand Here" required>
</div>
</div>

<!-- IMAGE -->
<div class="form-group row">
<label class="col-sm-3 text-right control-label col-form-label">Product Image</label>
<div class="col-sm-9">
<input type="file" class="form-control" name="ProductImage" accept="image/*" required>
</div>
</div>

<!-- PRICE -->
<div class="form-group row">
<label class="col-sm-3 text-right control-label col-form-label">Product price</label>
<div class="col-sm-9">
<input type="number" class="form-control" name="Productprice" placeholder="product price Here" min="1" required>
</div>
</div>

<div class="border-top">
<div class="card-body">
<button type="submit" class="btn btn-primary">Submit</button>
</div>
</div>

</div>
</form>
</div>

</div>
</div>
</div>

</div>

<!-- FETCH SCRIPT -->
<script>
let CategoryId = document.getElementById("CategoryId");
let SubCategoryId = document.getElementById("SubCategoryId");
let ExtraSubCategoryId = document.getElementById("ExtraSubCategoryId");

CategoryId.addEventListener("change", () => {
let id = CategoryId.value;

fetch(`/extrasubcategory/subcategory/${id}`)
.then(res => res.json())
.then(data => {
let result = data.data;
SubCategoryId.innerHTML = `<option value="">--select--</option>`;
result.forEach(res => {
let option = document.createElement("option");
option.innerHTML = res.SubCategoryName;
option.value = res._id;
SubCategoryId.append(option);
});
});
});

SubCategoryId.addEventListener("change", () => {
let id = SubCategoryId.value;

fetch(`/product/extrasubcategory/${id}`)
.then(res => res.json())
.then(data => {
let result = data.data;
ExtraSubCategoryId.innerHTML = `<option value="">--select--</option>`;
result.forEach(res => {
let option = document.createElement("option");
option.innerHTML = res.ExtraSubCategoryname;
option.value = res._id;
ExtraSubCategoryId.append(option);
});
});
});
</script>

<%- include('../footer') %>
